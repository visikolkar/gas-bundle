"use strict";(self.webpackChunkGAS=self.webpackChunkGAS||[]).push([[779],{4779:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var o=r(3433),n=r(5671),l=r(3144),c=r(7326),a=r(136),i=r(2963),s=r(1120),u=r(4942),f=r(5543),p=r.n(f),d=r(9956),b=r(7294),v=r(932),S=r(8977),g=r(7011),h=r(6294),E=r(7679);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=(0,s.Z)(e);if(t){var n=(0,s.Z)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return(0,i.Z)(this,r)}}var m=function(e){(0,a.Z)(r,e);var t=Z(r);function r(e){var l;return(0,n.Z)(this,r),l=t.call(this,e),(0,u.Z)((0,c.Z)(l),"selector",b.createRef()),(0,u.Z)((0,c.Z)(l),"getSelectionAttributes",(function(e){var t=[],r=[];return e.getAttributes&&(t=e.getAttributes().filter((function(e){return e.metadata.get("isDisplayed")}))),e.getPivotAttributes&&(r=e.getPivotAttributes().filter((function(e){return e.metadata.get("isDisplayed")}))),[].concat((0,o.Z)(t),(0,o.Z)(r))})),(0,u.Z)((0,c.Z)(l),"getSelections",(function(e){var t={selectedAttributes:{}};try{if(l.selector&&l.selector.current&&l.selector.current.state&&l.selector.current.state.attributeModelExplorer){var r,o,n=l.selector.current.state.attributeModelExplorer.modelExplorer;if(null!=n&&null!==(r=n.attributeModelExplorer)&&void 0!==r&&r.getSelectedValues)t.userSelection=null==n||null===(o=n.attributeModelExplorer)||void 0===o?void 0:o.getSelectedValues();var c=l.getSelectionAttributes(l.selector.current.state.attributeModelExplorer),a={};c.forEach((function(e){var t=e.getResolvedValue();t&&(a[e.key]=t)})),t.selectedAttributes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a)}if("fullyResolved"===e.state){var i=[],s={};e.attributes&&e.attributes.forEach((function(e){void 0!==e.resolvedValue&&(s[e.key]=e.resolvedValue),e.isDisplayed&&i.push({attributeKey:e.key,attributeValue:e.resolvedValue})})),t.finalSelection=s}}catch(e){l.setState({localError:!0})}return t})),(0,u.Z)((0,c.Z)(l),"onSelectionChange",(function(e){var t=l.props,r=t.onChange,o=t.getSelectorState,n=l.getSelections(e);r&&r(n),o&&o(e.state)})),(0,u.Z)((0,c.Z)(l),"onloadSelector",(function(e){var t=e.state,r=l.props,o=r.getSelectorState,n=r.onChange,c=l.getSelections(e);l.setState({onloadSelector:!0}),o&&o(t),n&&n(c)})),(0,u.Z)((0,c.Z)(l),"onSelectorError",(function(e){var t=l.props.onError;t&&t(!1,e)})),r.contextType=S.mn,l.state={localError:!1,onloadSelector:!1},l}return(0,l.Z)(r,[{key:"render",value:function(){var e=this.props.productDetails,t=e.productRuleSet,r=e.customization,o=e.defaultSelection,n=this.context.ecxGlobalState,l=this.state,c=l.localError,a=l.onloadSelector;return c||!t?b.createElement(b.Fragment,null,b.createElement(g.Z,{message:(0,v.TT)(v._.ERROR_MESSAGE_ATTR_SELECTOR,n.locale),shortView:!0})):b.createElement(b.Fragment,null,!a&&b.createElement(h.Z,null),b.createElement(d.Z,{display:a?"block":"none"},b.createElement(d.Z,{className:"webshop-attr-selector",component:"div"},b.createElement(p(),{onLoad:this.onloadSelector,ref:this.selector,product:t,onChange:this.onSelectionChange,onError:this.onSelectorError,errorAlertConfiguration:{showErrorAlert:!1},attributeConfigurations:o,selectorUI:E.Z,selectorUIConfigurations:r,allowDisabledSelection:!0,authToken:""}))))}}]),r}(b.Component);const O=b.memo(m)}}]);